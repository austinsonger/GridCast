<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>GridCast</title>
      <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
      <link rel="stylesheet" href="./assets/style.css">
   </head>
   <body>
      <!-- 2x2 Grid of Video Players -->
      <div id="player1" class="player">
         <video id="video1" controls></video>
         <button class="load-stream" onclick="window.electronAPI.openLoadStreamModal('video1')">Load Stream</button>
         <button class="add-to-playlist" onclick="window.electronAPI.openAddToPlaylistModal('video1')">Add to Playlist</button>
         <div id="playlist-video1" class="playlist"></div>
      </div>
      <div id="player2" class="player">
         <video id="video2" controls></video>
         <button class="load-stream" onclick="window.electronAPI.openLoadStreamModal('video2')">Load Stream</button>
         <button class="add-to-playlist" onclick="window.electronAPI.openAddToPlaylistModal('video2')">Add to Playlist</button>
         <div id="playlist-video2" class="playlist"></div>
      </div>
      <div id="player3" class="player">
         <video id="video3" controls></video>
         <button class="load-stream" onclick="window.electronAPI.openLoadStreamModal('video3')">Load Stream</button>
         <button class="add-to-playlist" onclick="window.electronAPI.openAddToPlaylistModal('video3')">Add to Playlist</button>
         <div id="playlist-video3" class="playlist"></div>
      </div>
      <div id="player4" class="player">
         <video id="video4" controls></video>
         <button class="load-stream" onclick="window.electronAPI.openLoadStreamModal('video4')">Load Stream</button>
         <button class="add-to-playlist" onclick="window.electronAPI.openAddToPlaylistModal('video4')">Add to Playlist</button>
         <div id="playlist-video4" class="playlist"></div>
      </div>

      <!-- Modal for Stream URL Input -->
      <div id="urlModal">
         <label for="streamUrl">Enter M3U8 Stream URL:</label>
         <input type="text" id="streamUrl" placeholder="https://example.com/stream.m3u8">
         <label for="mp4File">Or Upload MP4 File:</label>
         <input type="file" id="videoFile" accept="video/mp4,video/x-matroska">
         <button onclick="window.electronAPI.loadStreamOrFile()">Load</button>
         <button onclick="window.electronAPI.closeModal()">Cancel</button>
      </div>

      <!-- Modal for Adding to Playlist -->
      <div id="addToPlaylistModal">
         <label for="addPlaylistUrl">Add URL to Playlist:</label>
         <input type="text" id="addPlaylistUrl" placeholder="https://example.com/stream.m3u8">
         <label for="addMp4File">Or Upload MP4 File:</label>
         <input type="file" id="addMp4File" accept="video/mp4,video/x-matroska">
         <button onclick="window.electronAPI.handleAddToPlaylist()">Add</button>
         <button onclick="window.electronAPI.closeModal()">Cancel</button>
      </div>

      <script>
         window.electronAPI.loadSavedData();
      </script>
   </body>
</html>
